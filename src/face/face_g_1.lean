import Mathlib.Tactic


theorem face3(x₁ x₂ y: ℝ)
             (h₁: g₂ =1 - (x₁ -4)^2 - x₂^2)
             (h₂: I=(57*x₁)/1000 - (795737*x₂)/1000000 + (38891*x₁^2*x₂^2)/1000000 + (279129*x₁*x₂)/1000000 + (31191*x₁*x₂^2)/200000 + (22271*x₁^2*x₂)/250000 - (36391*x₁*x₂^3)/500000 - (1159*x₁^3*x₂)/62500 - (1061523*x₁^2)/1000000 - (12773*x₁^3)/1000000 + (76769*x₂^2)/20000 + (24401*x₁^4)/1000000 + (7737*x₂^3)/125000 + (436083*x₂^4)/500000 + 224497/100000):
              0 ≤ g₂
                →  I ≤  0 := by

  let p₀: ℝ :=(214637*x₂)/2000000 - (600299*x₁)/2000000 - (55405661163128358719*x₁*x₂)/1125899906842624000000 - (23497976301830283341*x₁^2)/105553116266496000000 - (59972645486856646817*x₂^2)/844424930131968000000 + 97831/20000
  let p₁: ℝ :=(13266626658973386743994729263*x₂)/1032636691746757017600000000 - (539942971435978202732836111*x₁)/2753697844658018713600000000 - (40511863741174364917732129197*x₁*x₂)/11014791378632074854400000000 + (3716892980221855512289764913*x₁^2)/66088748271792449126400000000 - (21200492407007584567890209*x₂^2)/434794396524950323200000000
  let p₂: ℝ :=(2429540877220058615868452099578278672520985664715577*x₁)/358485449266896197122946466563495136684146688000000 - (15237158497603418021810067824709796064067407740251*x₁*x₂)/477980599022528262830595288751326848912195584000000 - (4720541074206914508402067165304747452149051225511213*x₁^2)/2867883594135169576983571732507961093473173504000000 - (41635032499287501452978468441553589814270452121981*x₂^2)/71697089853379239424589293312699027336829337600000
  let p₃: ℝ :=(5395819963277099950724143459226248167039232599562708505541913790768537418046377218071*x₁*x₂)/4619713426930539445140783134240148897445259910487031829074362146555825178886012928000000 - (128103917147659135775328177933970982918630667013166860455195277088940838325818765301*x₁^2)/13970907541120582999417690930161740617273971503489007547603917781922858403889152000000 + (513532593488192296447821709689695567372667383382772643974146471560807439931070580851401*x₂^2)/3464785070197904583855587350680111673083944932865273871805771609916868884164509696000000
  let p₄: ℝ :=(2028656547680851160884637021759870990884123029965608004189491089418078111520378279056603608730419788847767009*x₁*x₂)/13876471180056163361662107418714484370697749880362147915009321482798783192518723721386468871703285989376000000 - (87141278784374814104555443232400352200038817193765544979193958362621402217293827420378285843741123417492993*x₁^2)/37003923146816435631098953116571958321860666347632394440024857287463421846716596590363916991208762638336000000
  let p₅: ℝ :=(6789670470776728774778358686957356181508279924862789118701500015845710852973811818437028168708196109933948504309927704002336389823*x₁^2)/3508322638924108085564979038565603976753075983595709213416759453725415649573790830770205182096330719447708622696031204646322176000000

  let p₀': ℝ :=(217523*x₁)/2000000 - (1937*x₂)/100000 + 59471/125000
  let p₁': ℝ :=(25467061437*x₂)/23788400000 - (6370523969*x₁)/475768000000
  let p₂': ℝ :=(839509321111825517*x₁)/2037364914960000000

  let δ₂₀: ℝ := 20000/97831*(p₀^2) +
      1032636691746757017600000000/13266626658973386743994729263*(p₁^2) +
      358485449266896197122946466563495136684146688000000/2429540877220058615868452099578278672520985664715577*(p₂^2) +
      3464785070197904583855587350680111673083944932865273871805771609916868884164509696000000/513532593488192296447821709689695567372667383382772643974146471560807439931070580851401*(p₃^2) +
      13876471180056163361662107418714484370697749880362147915009321482798783192518723721386468871703285989376000000/2028656547680851160884637021759870990884123029965608004189491089418078111520378279056603608730419788847767009*(p₄^2) +
      3508322638924108085564979038565603976753075983595709213416759453725415649573790830770205182096330719447708622696031204646322176000000/6789670470776728774778358686957356181508279924862789118701500015845710852973811818437028168708196109933948504309927704002336389823*(p₅^2)

  let δ₂₁: ℝ :=125000/59471*(p₀'^2) +
      23788400000/25467061437*(p₁'^2) +
      2037364914960000000/839509321111825517*(p₂'^2)

  have h0 :20000/97831*(p₀^2) +
      1032636691746757017600000000/13266626658973386743994729263*(p₁^2) +
      358485449266896197122946466563495136684146688000000/2429540877220058615868452099578278672520985664715577*(p₂^2) +
      3464785070197904583855587350680111673083944932865273871805771609916868884164509696000000/513532593488192296447821709689695567372667383382772643974146471560807439931070580851401*(p₃^2) +
      13876471180056163361662107418714484370697749880362147915009321482798783192518723721386468871703285989376000000/2028656547680851160884637021759870990884123029965608004189491089418078111520378279056603608730419788847767009*(p₄^2) +
      3508322638924108085564979038565603976753075983595709213416759453725415649573790830770205182096330719447708622696031204646322176000000/6789670470776728774778358686957356181508279924862789118701500015845710852973811818437028168708196109933948504309927704002336389823*(p₅^2)
         = δ₂₀ := by exact rfl
  have h1 : 125000/59471*(p₀'^2) +
      23788400000/25467061437*(p₁'^2) +
      2037364914960000000/839509321111825517*(p₂'^2)  = δ₂₁ := by exact rfl
  have D₁: I = -δ₂₀ - δ₂₁*g₂ := by
    rw [h₁,h₂]
    linear_combination
  have l₀: δ₂₀ ≥ 0 := by
    rw [← h0]
    have : p₀ ^ 2 ≥ 0 := by --开始证明每一个平方和项大于等于0
          exact sq_nonneg p₀
    have : p₁ ^ 2 ≥ 0 := by
          exact sq_nonneg p₁
    have : p₂ ^ 2 ≥ 0 := by
          exact sq_nonneg p₂
    have : p₃ ^ 2 ≥ 0 := by
          exact sq_nonneg p₃
    have : p₄ ^ 2 ≥ 0 := by
          exact sq_nonneg p₄
    have : p₅ ^ 2 ≥ 0 := by
          exact sq_nonneg p₅
    linarith
  have l₁: δ₂₁ ≥ 0 := by
    rw [← h1]
    have : p₀' ^ 2 ≥ 0 := by
      exact sq_nonneg p₀' --应用策略sq_nonneg（x^ 2 ≥ 0)
    have : p₁' ^ 2 ≥ 0 := by
      exact sq_nonneg p₁'
    have : p₂' ^ 2 ≥ 0 := by
      exact sq_nonneg p₂'
    linarith
  rw [D₁]
  intro g
  have s₁ : 0 ≤ δ₂₁*g₂ := by
    exact Right.mul_nonneg l₁ g
  linarith
